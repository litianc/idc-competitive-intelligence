# 需求规范文档

## 项目概述

构建一个自动化竞争情报系统，用于监控中国IDC（数据中心）行业的市场动态、技术进展、投资活动和政策变化。

## 功能需求

### 1. 数据采集

**1.1 媒体源监控**
- 监控3-5个中国IDC行业核心媒体网站
- 自动采集行业新闻文章
- 提取文章标题、链接、内容、实际发布日期
- 验证原文链接可访问性

**1.2 采集频率**
- 每日自动采集：每天早上8:00执行
- 支持手动触发采集

**1.3 数据质量**
- 基于URL hash的去重机制
- 记录文章实际发布日期（不是采集时间）
- 验证链接有效性（HTTP状态码检查）

### 2. 智能摘要生成

**2.1 LLM摘要**
- 使用大语言模型为每篇文章生成中文摘要
- 摘要长度：80-150字
- 突出核心信息和业务价值
- 使用专业术语

**2.2 LLM服务**
- 支持OpenAI GPT-4
- 支持Anthropic Claude
- 配置化的API密钥和模型选择
- 错误处理和重试机制
- 结果缓存避免重复调用

### 3. 优先级评分系统

**3.1 评分模型**

采用4维度评分模型，总分100分：

#### 维度1：业务相关性（40分）
关键词匹配得分：
- 核心关键词（10分/个，最多40分）：
  - IDC、数据中心、云计算、云服务
  - AI算力、GPU、算力中心
  - 服务器、机柜、机房
  - 液冷、制冷、PUE
  - 边缘计算、CDN

- 次要关键词（5分/个，最多20分）：
  - 大数据、存储、网络
  - 运维、托管、租赁
  - 绿色节能、碳中和

#### 维度2：时效性（25分）
基于文章发布日期的衰减公式：
```
时效性得分 = 25 × (1 - days_since_publish / 7)
```
- 当天发布：25分
- 3天前：≈14分
- 7天前：0分
- 超过7天：0分

#### 维度3：影响范围（20分）
根据文章涉及的规模和影响：
- 融资金额：
  - ≥10亿元：20分
  - 5-10亿元：15分
  - 1-5亿元：10分
  - <1亿元：5分
- 项目规模：
  - 大型数据中心（≥1万机柜）：20分
  - 中型数据中心（5千-1万机柜）：15分
  - 小型数据中心（<5千机柜）：10分
- 行业影响：
  - 行业标准制定：20分
  - 重大技术突破：18分
  - 战略合作/并购：15分
  - 产品发布：10分

#### 维度4：来源可信度（15分）
根据媒体源的权威性：
- Tier 1（权威媒体）：15分
  - 中国IDC圈
  - 数据中心世界
- Tier 2（专业媒体）：8分
  - 通信世界网
  - 科技媒体IDC频道
- Tier 3（一般媒体）：3分
  - 其他行业网站

**3.2 优先级分类**

根据总分映射到三个优先级：
- **高优先级**：≥70分
  - 核心业务相关且时效性强
  - 重大融资/并购/技术突破
  - 权威来源的重要新闻

- **中优先级**：40-69分
  - 一般业务相关
  - 一定影响范围
  - 中等可信度来源

- **低优先级**：<40分
  - 弱相关或过时信息
  - 影响范围小
  - 来源可信度低

### 4. 内容分类系统

**4.1 分类体系**

采用四类内容分类（一篇文章可属于多个类别）：

#### 分类1：投资动态
关键词：
- 融资、投资、并购、收购、IPO
- 估值、轮次、风投、PE、VC
- 募资、资本、股权
- 上市、挂牌

#### 分类2：技术进展
关键词：
- GPU、芯片、处理器、算力
- 液冷、风冷、散热、制冷
- 新品、发布、推出、上线
- 技术、突破、创新、研发
- AI模型、训练、推理
- 性能、效率、优化

#### 分类3：政策法规
关键词：
- 政策、法规、标准、规范
- 监管、审批、许可、备案
- 规划、指导、意见、通知
- 国家、政府、工信部、发改委
- 条例、办法、细则

#### 分类4：市场动态
关键词：
- 市场、份额、排名、占比
- 增长、下滑、趋势、预测
- 报告、分析、研究、调研
- 需求、供给、竞争、格局
- 价格、成本、利润

**4.2 分类规则**
- 基于关键词匹配
- 支持多类别标签
- 优先级：投资 > 技术 > 政策 > 市场
- 无匹配则归类为"其他"

### 5. 周报生成

**5.1 报告类型**
- 简洁版Markdown周报（默认）
- 周报覆盖时间：过去7天
- 生成时间：每周五下午5:00

**5.2 报告结构**
```
标题：IDC行业周报 | 2025年第X周

一、投资动态【高优先级】
   - 高优先级投资类文章列表

二、技术进展【高优先级】
   - 高优先级技术类文章列表

三、政策法规【高优先级】
   - 高优先级政策类文章列表

四、市场动态【高优先级】
   - 高优先级市场类文章列表

五、其他动态【中低优先级】
   - 中低优先级文章汇总
```

**5.3 文章条目格式**
```markdown
序号. 文章标题
   【分类标签】来源媒体 | 发布日期
   文章摘要（LLM生成，80-150字）
   [详情](原文链接)
```

**5.4 数据源**
- 默认：从SQLite数据库读取
- 可选：使用样本数据（测试模式，--sample参数）

### 6. 质量标准

**6.1 内容完整性**
- 每篇文章必须包含：标题、链接、来源、发布日期、摘要
- 链接必须可访问（link_valid=true）
- 摘要长度在80-150字之间

**6.2 格式规范**
- 遵循中文商业文档格式
- 使用中文编号（一、二、三、四）
- 标签使用【】括号
- 全角标点符号

**6.3 时效性**
- 优先展示近7天内的文章
- 超过7天的文章时效性得分为0

## 非功能需求

### 1. 性能要求
- 采集单个媒体源：<30秒
- 生成周报：<60秒
- LLM摘要生成：<10秒/篇

### 2. 可靠性
- 爬虫遇到错误继续处理其他文章
- LLM API失败后重试3次
- 数据库事务保证数据一致性

### 3. 可扩展性
- 支持添加更多媒体源
- 支持调整评分权重
- 支持自定义分类关键词

### 4. 可维护性
- 配置文件集中管理
- 完整的测试覆盖（≥80%）
- 清晰的代码文档

## 验收标准

✅ 成功采集3-5个媒体源的文章
✅ 正确提取文章实际发布日期
✅ 所有文章链接可正常访问
✅ LLM生成的摘要符合80-150字要求
✅ 优先级评分准确反映业务重要性
✅ 周报包含4个完整模块
✅ 周报格式符合中文商业规范
✅ 测试覆盖率≥80%
