# å¦‚ä½•æ·»åŠ æ–°åª’ä½“æº

## ğŸ‰ å¥½æ¶ˆæ¯ï¼š90%ä»£ç å¯å¤ç”¨ï¼

ä½¿ç”¨**é…ç½®é©±åŠ¨çš„é€šç”¨çˆ¬è™«**ï¼Œæ·»åŠ æ–°åª’ä½“æº**åªéœ€è¦é…ç½®ï¼Œæ— éœ€å†™ä»£ç **ï¼

## ğŸ“‹ æ·»åŠ æµç¨‹

### æ–¹æ³•1ï¼šç®€å•ç½‘ç«™ï¼ˆæ¨èï¼‰ âœ…

**é€‚ç”¨äº**ï¼šå¤§éƒ¨åˆ†æ–°é—»ç½‘ç«™ã€åšå®¢ã€èµ„è®¯ç«™

**æ­¥éª¤ï¼š**

1. **æ‰¾åˆ°æ–‡ç« åˆ—è¡¨é¡µURL**
   ```
   ä¾‹å¦‚ï¼šhttps://36kr.com/newsflashes
   ```

2. **æŸ¥çœ‹é¡µé¢HTMLï¼Œæ‰¾åˆ°CSSé€‰æ‹©å™¨**
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
   - æ‰¾åˆ°ä¸€ç¯‡æ–‡ç« çš„HTMLç»“æ„
   - è®°å½•CSSé€‰æ‹©å™¨

3. **æ·»åŠ é…ç½®åˆ° `config/media-sources.json`**
   ```json
   {
     "name": "36æ°ª",
     "url": "https://36kr.com",
     "tier": 2,
     "active": true,
     "description": "ç§‘æŠ€åˆ›æŠ•åª’ä½“ï¼Œè¦†ç›–åˆ›ä¸šã€æŠ•èµ„ã€ç§‘æŠ€èµ„è®¯",
     "scraper_config": {
       "scraper_type": "generic",
       "list_url": "https://36kr.com/newsflashes",
       "encoding": "utf-8",
       "article_container": "div.article-item",
       "title_selector": "h2.title a",
       "link_selector": "h2.title a",
       "date_selector": "span.time",
       "summary_selector": "div.summary",
       "date_format": "%Y-%m-%d"
     }
   }
   ```

4. **æµ‹è¯•**
   ```bash
   python tmp/test_generic_scraper.py
   ```

**å°±è¿™æ ·ï¼** æ— éœ€å†™ä»»ä½•Pythonä»£ç ï¼

---

### æ–¹æ³•2ï¼šå¤æ‚ç½‘ç«™

**é€‚ç”¨äº**ï¼šéœ€è¦ç™»å½•ã€å¤æ‚JSæ¸²æŸ“ã€ç‰¹æ®Šåçˆ¬çš„ç½‘ç«™

**æ­¥éª¤ï¼š**

1. åœ¨ `src/scrapers/` åˆ›å»ºä¸“é—¨çš„çˆ¬è™«ç±»
2. ç»§æ‰¿ `GenericScraper` æˆ–ä»å¤´å®ç°
3. åœ¨ `ScraperFactory.CUSTOM_SCRAPERS` æ³¨å†Œ

**ç¤ºä¾‹ï¼š**
```python
class CustomScraper(GenericScraper):
    def fetch_articles(self, limit=20):
        # è‡ªå®šä¹‰é€»è¾‘
        # ä¾‹å¦‚ï¼šç™»å½•ã€å¤„ç†éªŒè¯ç ç­‰
        pass
```

---

## ğŸ” å¦‚ä½•æ‰¾CSSé€‰æ‹©å™¨

### å·¥å…·æ–¹æ³•

ä½¿ç”¨æä¾›çš„åˆ†æå·¥å…·ï¼š

```bash
python tmp/analyze_website.py https://ç›®æ ‡ç½‘ç«™.com
```

å·¥å…·ä¼šè‡ªåŠ¨åˆ†æå¹¶è¾“å‡ºï¼š
- å¯èƒ½çš„æ–‡ç« å®¹å™¨
- æ ‡é¢˜é€‰æ‹©å™¨
- é“¾æ¥é€‰æ‹©å™¨
- æ—¥æœŸé€‰æ‹©å™¨

### æ‰‹åŠ¨æ–¹æ³•

1. æ‰“å¼€ç›®æ ‡ç½‘ç«™
2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. ç‚¹å‡» Elements æ ‡ç­¾
4. ä½¿ç”¨é€‰æ‹©å™¨å·¥å…· (Ctrl+Shift+C) ç‚¹å‡»æ–‡ç« 
5. æŸ¥çœ‹HTMLç»“æ„ï¼Œæ‰¾åˆ°classæˆ–id
6. æµ‹è¯•CSSé€‰æ‹©å™¨ï¼š
   ```javascript
   // åœ¨Consoleä¸­æµ‹è¯•
   document.querySelectorAll("ä½ çš„é€‰æ‹©å™¨")
   ```

### å¸¸è§é€‰æ‹©å™¨æ¨¡å¼

| å…ƒç´  | å¸¸è§é€‰æ‹©å™¨ |
|------|------------|
| æ–‡ç« å®¹å™¨ | `.article-item`, `.news-item`, `article`, `.post` |
| æ ‡é¢˜ | `h2 a`, `.title a`, `.headline` |
| é“¾æ¥ | `a`, `.title a`, `.link` |
| æ—¥æœŸ | `.date`, `.time`, `time`, `.publish-date` |
| æ‘˜è¦ | `.summary`, `.desc`, `.excerpt`, `p` |

---

## ğŸ“ é…ç½®å­—æ®µè¯´æ˜

### å¿…å¡«å­—æ®µ

```json
{
  "name": "åª’ä½“åç§°",              // å¿…å¡«ï¼šæ˜¾ç¤ºåç§°
  "url": "https://base.url",     // å¿…å¡«ï¼šåŸºç¡€URL
  "tier": 1,                      // å¿…å¡«ï¼šåª’ä½“ç­‰çº§ï¼ˆ1-3ï¼‰
  "active": true,                 // å¿…å¡«ï¼šæ˜¯å¦å¯ç”¨
  "scraper_config": {
    "list_url": "æ–‡ç« åˆ—è¡¨é¡µURL",  // å¿…å¡«
    "article_container": "é€‰æ‹©å™¨", // å¿…å¡«
    "title_selector": "é€‰æ‹©å™¨",    // å¿…å¡«
    "link_selector": "é€‰æ‹©å™¨"      // å¿…å¡«
  }
}
```

### å¯é€‰å­—æ®µ

```json
{
  "description": "åª’ä½“æè¿°",
  "scraper_config": {
    "scraper_type": "generic",     // generic | custom
    "encoding": "utf-8",           // utf-8 | gbk
    "date_selector": "é€‰æ‹©å™¨",      // å¯é€‰ä½†æ¨è
    "summary_selector": "é€‰æ‹©å™¨",   // å¯é€‰
    "date_format": "%Y-%m-%d",     // æ—¥æœŸæ ¼å¼
    "request_delay": [2, 5]        // è¯·æ±‚å»¶è¿Ÿï¼ˆç§’ï¼‰
  }
}
```

### Tierç­‰çº§å®šä¹‰

- **Tier 1 (15åˆ†)**ï¼šæƒå¨è¡Œä¸šå‚ç›´åª’ä½“
  - ä¾‹å¦‚ï¼šIDCåœˆã€æ•°æ®ä¸­å¿ƒä¸–ç•Œ
- **Tier 2 (8åˆ†)**ï¼šä¸“ä¸šç§‘æŠ€åª’ä½“
  - ä¾‹å¦‚ï¼š36æ°ªã€InfoQã€é’›åª’ä½“
- **Tier 3 (3åˆ†)**ï¼šä¸€èˆ¬èµ„è®¯ç½‘ç«™
  - ä¾‹å¦‚ï¼šç»¼åˆæ–°é—»ç½‘ç«™çš„ç§‘æŠ€é¢‘é“

---

## ğŸ¯ é…ç½®ç¤ºä¾‹

### ç¤ºä¾‹1ï¼š36æ°ªï¼ˆç§‘æŠ€åª’ä½“ï¼‰

```json
{
  "name": "36æ°ª",
  "url": "https://36kr.com",
  "tier": 2,
  "active": true,
  "description": "ç§‘æŠ€åˆ›æŠ•åª’ä½“ï¼Œè¦†ç›–åˆ›ä¸šæŠ•èµ„ã€ç§‘æŠ€èµ„è®¯",
  "scraper_config": {
    "scraper_type": "generic",
    "list_url": "https://36kr.com/newsflashes",
    "encoding": "utf-8",
    "article_container": "div.newsflash-item",
    "title_selector": "a.item-title",
    "link_selector": "a.item-title",
    "date_selector": "span.time",
    "date_format": "%Y-%m-%d"
  }
}
```

### ç¤ºä¾‹2ï¼šInfoQï¼ˆæŠ€æœ¯åª’ä½“ï¼‰

```json
{
  "name": "InfoQ",
  "url": "https://www.infoq.cn",
  "tier": 2,
  "active": true,
  "description": "è½¯ä»¶å¼€å‘å’ŒæŠ€æœ¯èµ„è®¯",
  "scraper_config": {
    "scraper_type": "generic",
    "list_url": "https://www.infoq.cn/topic/cloud-computing",
    "encoding": "utf-8",
    "article_container": "div.article-item",
    "title_selector": "h2 a",
    "link_selector": "h2 a",
    "date_selector": "span.publish-time",
    "summary_selector": "div.abstract",
    "date_format": "%Y-%m-%d"
  }
}
```

### ç¤ºä¾‹3ï¼šé‡å­ä½ï¼ˆAIåª’ä½“ï¼‰

```json
{
  "name": "é‡å­ä½",
  "url": "https://www.qbitai.com",
  "tier": 2,
  "active": true,
  "description": "AIå’Œå‰æ²¿ç§‘æŠ€èµ„è®¯",
  "scraper_config": {
    "scraper_type": "generic",
    "list_url": "https://www.qbitai.com/",
    "encoding": "utf-8",
    "article_container": "div.post-item",
    "title_selector": "h3.title a",
    "link_selector": "h3.title a",
    "date_selector": "time",
    "summary_selector": "div.excerpt",
    "date_format": "%Y-%m-%d"
  }
}
```

---

## âš™ï¸ æ—¥æœŸæ ¼å¼è¯´æ˜

### æ”¯æŒçš„æ ¼å¼

| æ ¼å¼ | ç¤ºä¾‹ | Pythonæ ¼å¼ç  |
|------|------|-------------|
| æ ‡å‡†æ—¥æœŸ | 2025-11-03 | `%Y-%m-%d` |
| å¸¦æ—¶é—´ | 2025-11-03 18:02:21 | `%Y-%m-%d %H:%M:%S` |
| ä¸­æ–‡æ ¼å¼ | 2025å¹´11æœˆ3æ—¥ | è‡ªåŠ¨è¯†åˆ« |
| ç›¸å¯¹æ—¶é—´ | 3å¤©å‰ | è‡ªåŠ¨è¯†åˆ« |
| å°æ—¶å‰ | 2å°æ—¶å‰ | è‡ªåŠ¨è¯†åˆ« |

### è‡ªåŠ¨è¯†åˆ«

GenericScraperä¼šè‡ªåŠ¨å°è¯•å¤šç§æ ¼å¼ï¼Œé€šå¸¸ä¸éœ€è¦é…ç½® `date_format`ã€‚

---

## ğŸ§ª æµ‹è¯•æ–°é…ç½®

### å•ä¸ªåª’ä½“æµ‹è¯•

```python
from src.scrapers.generic_scraper import GenericScraper

# æµ‹è¯•æŒ‡å®šåª’ä½“
scraper = GenericScraper.from_config_file(
    config_path="config/media-sources.json",
    source_name="36æ°ª"
)

articles = scraper.fetch_articles(limit=5)
for article in articles:
    print(f"âœ“ {article['title']}")
```

### æ‰¹é‡æµ‹è¯•

```bash
# ä½¿ç”¨æµ‹è¯•è„šæœ¬
python tmp/test_generic_scraper.py
```

### éªŒè¯æ¸…å•

- [ ] æ ‡é¢˜æå–æ­£ç¡®
- [ ] URLå®Œæ•´ä¸”å¯è®¿é—®
- [ ] æ—¥æœŸè§£æä¸ºdateå¯¹è±¡
- [ ] æ‘˜è¦å†…å®¹æœ‰æ„ä¹‰ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
- [ ] è‡³å°‘èƒ½æŠ“å–5-10ç¯‡æ–‡ç« 

---

## ğŸš€ å¿«é€Ÿæ·»åŠ 22ä¸ªæ–°åª’ä½“

### æ­¥éª¤æ¦‚è§ˆ

1. **ç¡®å®šä¼˜å…ˆçº§**
   - å…ˆæ·»åŠ Tier 1å’Œé‡è¦çš„Tier 2åª’ä½“
   - æµ‹è¯•æˆåŠŸåå†æ·»åŠ å…¶ä»–

2. **åˆ†æ‰¹æ·»åŠ **
   ```
   ç¬¬ä¸€æ‰¹ï¼š3-5ä¸ªé‡è¦åª’ä½“ï¼ˆæ‰‹åŠ¨é…ç½®+æµ‹è¯•ï¼‰
   ç¬¬äºŒæ‰¹ï¼š10-15ä¸ªï¼ˆå¤åˆ¶æ¨¡æ¿ï¼Œå¿«é€Ÿé…ç½®ï¼‰
   ç¬¬ä¸‰æ‰¹ï¼šå‰©ä½™ï¼ˆæŒ‰éœ€æ·»åŠ ï¼‰
   ```

3. **ä½¿ç”¨åˆ†æå·¥å…·**
   ```bash
   # ä¸ºæ¯ä¸ªç½‘ç«™è¿è¡Œ
   python tmp/analyze_website.py https://ç›®æ ‡ç½‘ç«™.com
   ```

4. **å¿«é€Ÿæµ‹è¯•**
   ```bash
   # æµ‹è¯•æ‰€æœ‰æ´»è·ƒåª’ä½“
   python tmp/test_all_sources.py
   ```

---

## ğŸ“Š å·¥ä½œé‡ä¼°ç®—

| ä»»åŠ¡ | æ—¶é—´ï¼ˆæ¯ä¸ªåª’ä½“ï¼‰ |
|------|-----------------|
| æ‰¾é€‰æ‹©å™¨ | 5-10åˆ†é’Ÿ |
| å†™é…ç½® | 2-3åˆ†é’Ÿ |
| æµ‹è¯• | 2-3åˆ†é’Ÿ |
| **æ€»è®¡** | **~10-15åˆ†é’Ÿ** |

**22ä¸ªåª’ä½“ Ã— 15åˆ†é’Ÿ â‰ˆ 5.5å°æ—¶**

å¦‚æœè‡ªå·±å†™çˆ¬è™«ä»£ç ï¼š
- æ¯ä¸ªåª’ä½“ï¼š30-60åˆ†é’Ÿ
- 22ä¸ªåª’ä½“ï¼š11-22å°æ—¶
- **èŠ‚çœæ—¶é—´ï¼š50-75%** âœ…

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. é…ç½®å‘½åè§„èŒƒ

```json
{
  "name": "ç»Ÿä¸€ä½¿ç”¨ä¸­æ–‡å…¨ç§°",
  "url": "ä½¿ç”¨å®˜æ–¹åŸŸå",
  "description": "ç®€æ´æè¿°ï¼ˆ30å­—ä»¥å†…ï¼‰"
}
```

### 2. é€‰æ‹©å™¨è§„èŒƒ

```json
{
  "article_container": "å°½é‡ç²¾ç¡®ï¼Œé¿å…åŒ¹é…è¿‡å¤š",
  "title_selector": "ä¼˜å…ˆä½¿ç”¨classï¼Œé¿å…æ ‡ç­¾é€‰æ‹©",
  "link_selector": "ç¡®ä¿èƒ½è·å–å®Œæ•´URL"
}
```

### 3. æµ‹è¯•è§„èŒƒ

- æ¯æ·»åŠ ä¸€ä¸ªåª’ä½“ï¼Œç«‹å³æµ‹è¯•
- ç¡®è®¤è‡³å°‘èƒ½æŠ“å–5ç¯‡æ–‡ç« 
- æ£€æŸ¥æ—¥æœŸã€URLã€æ ‡é¢˜æ˜¯å¦æ­£ç¡®

### 4. ç»´æŠ¤è§„èŒƒ

```json
{
  "active": false,  // ä¸´æ—¶å¤±æ•ˆæ—¶è®¾ä¸ºfalse
  "notes": "ç½‘ç«™æ”¹ç‰ˆï¼Œé€‰æ‹©å™¨éœ€æ›´æ–°"  // æ·»åŠ å¤‡æ³¨
}
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æŠ“ä¸åˆ°æ–‡ç« 

**åŸå› ï¼š** é€‰æ‹©å™¨é”™è¯¯

**è§£å†³ï¼š**
```bash
# ä½¿ç”¨åˆ†æå·¥å…·
python tmp/analyze_website.py https://ç›®æ ‡ç½‘ç«™.com
```

### Q2: æ—¥æœŸè§£æå¤±è´¥

**åŸå› ï¼š** æ—¥æœŸæ ¼å¼ä¸åŒ¹é…

**è§£å†³ï¼š**
```python
# æ–¹æ³•1ï¼šæŒ‡å®šæ­£ç¡®çš„date_format
"date_format": "%Yå¹´%mæœˆ%dæ—¥"

# æ–¹æ³•2ï¼šä¾èµ–è‡ªåŠ¨è¯†åˆ«ï¼ˆæ¨èï¼‰
# åˆ é™¤date_formatå­—æ®µï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«
```

### Q3: URLä¸å®Œæ•´

**åŸå› ï¼š** ç½‘ç«™ä½¿ç”¨ç›¸å¯¹è·¯å¾„

**è§£å†³ï¼š**
```json
{
  "url": "https://base-url.com",  // ç¡®ä¿é…ç½®äº†æ­£ç¡®çš„base_url
  "link_selector": "a"             // GenericScraperä¼šè‡ªåŠ¨è¡¥å…¨
}
```

### Q4: éœ€è¦ç™»å½•æ‰èƒ½çœ‹

**åŸå› ï¼š** ç½‘ç«™éœ€è¦è®¤è¯

**è§£å†³ï¼š**
- æ–¹æ³•1ï¼šæ‰¾å…¬å¼€çš„RSS feed
- æ–¹æ³•2ï¼šåˆ›å»ºè‡ªå®šä¹‰çˆ¬è™«ï¼ˆæ–¹æ³•2ï¼‰

---

## ğŸ“š ä¸‹ä¸€æ­¥

å®Œæˆé…ç½®åï¼š

1. **é›†æˆåˆ°é‡‡é›†æµç¨‹**
   ```python
   from src.scrapers.generic_scraper import ScraperFactory

   # è‡ªåŠ¨åŠ è½½æ‰€æœ‰æ´»è·ƒåª’ä½“
   scrapers = ScraperFactory.create_all_scrapers("config/media-sources.json")

   for scraper in scrapers:
       articles = scraper.fetch_articles(limit=20)
       # å¤„ç†æ–‡ç« ...
   ```

2. **è®¾ç½®å®šæ—¶ä»»åŠ¡**
   ```python
   # æ¯å¤©è‡ªåŠ¨é‡‡é›†
   schedule.every().day.at("09:00").do(collect_all_sources)
   ```

3. **ç›‘æ§æ•°æ®è´¨é‡**
   - æ£€æŸ¥é‡‡é›†æˆåŠŸç‡
   - éªŒè¯æ•°æ®å®Œæ•´æ€§
   - æ›´æ–°å¤±æ•ˆçš„é€‰æ‹©å™¨

---

## âœ… æ€»ç»“

### ä¸ºä»€ä¹ˆé€šç”¨çˆ¬è™«æ˜¯æœ€ä½³é€‰æ‹©

| å¯¹æ¯”é¡¹ | æ¯ä¸ªåª’ä½“å†™ä»£ç  | é…ç½®é©±åŠ¨çˆ¬è™« |
|--------|----------------|--------------|
| å¼€å‘æ—¶é—´ | 30-60åˆ†é’Ÿ/ä¸ª | 10-15åˆ†é’Ÿ/ä¸ª |
| ä»£ç é‡ | ~100è¡Œ/ä¸ª | 0è¡Œï¼ˆåªé…ç½®ï¼‰ |
| ç»´æŠ¤æˆæœ¬ | é«˜ï¼ˆ22ä¸ªæ–‡ä»¶ï¼‰ | ä½ï¼ˆ1ä¸ªé…ç½®æ–‡ä»¶ï¼‰ |
| æ‰©å±•æ€§ | å·® | ä¼˜ç§€ |
| å­¦ä¹ æˆæœ¬ | éœ€è¦æ‡‚Python | åªéœ€æ‡‚CSS |

### æ ¸å¿ƒä¼˜åŠ¿

âœ… **èŠ‚çœ75%å¼€å‘æ—¶é—´**
âœ… **90%ä»£ç å¤ç”¨**
âœ… **ç»Ÿä¸€ç»´æŠ¤**ï¼ˆ1ä¸ªé…ç½®æ–‡ä»¶ vs 22ä¸ªä»£ç æ–‡ä»¶ï¼‰
âœ… **æ˜“äºæ‰©å±•**ï¼ˆæ·»åŠ æ–°åª’ä½“åªéœ€é…ç½®ï¼‰
âœ… **é™ä½é—¨æ§›**ï¼ˆä¸éœ€è¦æ·±åº¦PythonçŸ¥è¯†ï¼‰

---

**å‡†å¤‡å¥½æ·»åŠ æ‚¨çš„22ä¸ªåª’ä½“æºäº†å—ï¼Ÿ** ğŸš€

ä»æœ€é‡è¦çš„3-5ä¸ªå¼€å§‹ï¼Œé€æ­¥æ‰©å±•ï¼
